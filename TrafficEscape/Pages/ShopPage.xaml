<ContentPage
    x:Class="TrafficEscape.Pages.ShopPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Shop"
    BackgroundColor="Black">

	<Grid RowDefinitions="Auto, *, Auto" Padding="20">

		<VerticalStackLayout Grid.Row="0" Spacing="10" HorizontalOptions="Center">
			<Label Text="CAR SHOP" FontSize="32" TextColor="White" FontAttributes="Bold" HorizontalOptions="Center" />
			<HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
				<Image Source="coin.png" WidthRequest="25" HeightRequest="25"/>
				<Label x:Name="BalanceLabel" Text="0" TextColor="Gold" FontSize="20" FontAttributes="Bold"/>
			</HorizontalStackLayout>
		</VerticalStackLayout>

		<CollectionView Grid.Row="1" x:Name="SkinsCollection" Margin="0,20">
			<CollectionView.ItemTemplate>
				<DataTemplate>
                    <Border BackgroundColor="#1a1a1a" 
                            Stroke="Gray" 
                            StrokeThickness="1"
                            Margin="0,5" 
                            Padding="10">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="5" />
                        </Border.StrokeShape>

                        <HorizontalStackLayout Spacing="20">
                            <Image Source="{Binding .}" WidthRequest="60" HeightRequest="100" />
                            <VerticalStackLayout VerticalOptions="Center" Spacing="5">
                                <Button x:Name="ActionBtn"
                                        WidthRequest="120"
                                        Clicked="OnSkinActionClicked"
                                        Loaded="OnButtonLoaded"
                                        CommandParameter="{Binding .}"
                                        BackgroundColor="#3498db"
                                        Text="BUY (50)">
                                    <Button.Triggers>
                                        <DataTrigger TargetType="Button" Binding="{Binding Source={RelativeSource Self}, Path=Text}" Value="OWNED">
                                            <Setter Property="BackgroundColor" Value="#2ecc71" />
                                            <Setter Property="TextColor" Value="White" />
                                        </DataTrigger>
                                    </Button.Triggers>
                                </Button>
                            </VerticalStackLayout>
                        </HorizontalStackLayout>
                    </Border>
                </DataTemplate>
			</CollectionView.ItemTemplate>
		</CollectionView>

		<Button Grid.Row="2" Text="BACK" Clicked="OnBack" BackgroundColor="#3498db" />
	</Grid>
	
</ContentPage>
